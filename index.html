<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Profile Card Generator ‚Äì Create Verified Cards Instantly</title>
  <meta name="description" content="Create clean, premium profile cards with photo and verified badge. Download as PNG or JPG. No signup required.">
  <meta name="keywords" content="profile card generator, verified profile card, digital ID card maker, personal card generator, profile card download">
  <meta property="og:title" content="Profile Card Generator ‚Äì Create Verified Cards Instantly">
  <meta property="og:description" content="Create clean, premium profile cards with photo and verified badge. Download as PNG or JPG. No signup required.">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Profile Card Generator">
  <meta name="twitter:description" content="Create premium profile cards instantly. No signup required.">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.13/cropper.min.css">
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f8f9fa;
      color: #1a1a1a;
      min-height: 100vh;
      line-height: 1.5;
    }

    /* Navigation */
    nav {
      background: white;
      border-bottom: 1px solid #eee;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .nav-content {
      max-width: 1200px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.25rem;
      font-weight: 700;
      color: #1a1a1a;
      text-decoration: none;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo-icon {
      width: 32px;
      height: 32px;
      background: #1a1a1a;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1rem;
    }

    .nav-btn {
      background: #1a1a1a;
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      border-radius: 8px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .nav-btn:hover {
      background: #333;
    }

    /* Landing Page */
    .landing {
      min-height: calc(100vh - 65px);
      display: flex;
      flex-direction: column;
    }

    .hero {
      flex: 1;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 4rem 2rem;
      text-align: center;
    }

    .hero-content {
      max-width: 600px;
    }

    .hero-badge {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      background: #f0f0f0;
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.85rem;
      color: #666;
      margin-bottom: 1.5rem;
    }

    .hero h1 {
      font-size: clamp(2.5rem, 5vw, 3.5rem);
      font-weight: 800;
      line-height: 1.1;
      margin-bottom: 1.5rem;
      letter-spacing: -1px;
    }

    .hero p {
      font-size: 1.1rem;
      color: #666;
      margin-bottom: 2rem;
      max-width: 480px;
      margin-left: auto;
      margin-right: auto;
    }

    .hero-cta {
      display: flex;
      gap: 1rem;
      justify-content: center;
      flex-wrap: wrap;
    }

    .btn-primary {
      background: #1a1a1a;
      color: white;
      border: none;
      padding: 1rem 2rem;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
    }

    .btn-primary:hover {
      background: #333;
      transform: translateY(-2px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.12);
    }

    .btn-secondary {
      background: white;
      color: #1a1a1a;
      border: 2px solid #eee;
      padding: 1rem 2rem;
      border-radius: 12px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-secondary:hover {
      border-color: #ccc;
    }

    /* Features */
    .features {
      padding: 4rem 2rem;
      background: white;
      border-top: 1px solid #eee;
    }

    .features-grid {
      max-width: 900px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 2rem;
    }

    .feature {
      text-align: center;
      padding: 1.5rem;
    }

    .feature-icon {
      width: 48px;
      height: 48px;
      background: #f5f5f5;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 1rem;
      font-size: 1.25rem;
    }

    .feature h3 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .feature p {
      font-size: 0.9rem;
      color: #666;
    }

    /* Creator Page */
    .creator {
      display: none;
      min-height: calc(100vh - 65px);
      padding: 2rem;
    }

    .creator.active {
      display: block;
    }

    .creator-layout {
      max-width: 1100px;
      margin: 0 auto;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 3rem;
      align-items: start;
    }

    /* Editor Panel */
    .editor-panel {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      border: 1px solid #eee;
    }

    .editor-title {
      font-size: 1.25rem;
      font-weight: 700;
      margin-bottom: 1.5rem;
    }

    .form-group {
      margin-bottom: 1.5rem;
    }

    .form-label {
      display: block;
      font-size: 0.85rem;
      font-weight: 600;
      color: #333;
      margin-bottom: 0.5rem;
    }

    .form-input {
      width: 100%;
      padding: 0.875rem 1rem;
      border: 2px solid #eee;
      border-radius: 10px;
      font-size: 1rem;
      font-family: inherit;
      transition: border-color 0.2s;
    }

    .form-input:focus {
      outline: none;
      border-color: #1a1a1a;
    }

    .form-textarea {
      resize: vertical;
      min-height: 80px;
    }

    /* Photo Upload */
    .photo-upload {
      border: 2px dashed #ddd;
      border-radius: 12px;
      padding: 2rem;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
      overflow: hidden;
    }

    .photo-upload:hover {
      border-color: #999;
      background: #fafafa;
    }

    .photo-upload.has-photo {
      padding: 0;
      border-style: solid;
    }

    .photo-upload input {
      position: absolute;
      inset: 0;
      opacity: 0;
      cursor: pointer;
    }

    .upload-placeholder {
      color: #888;
    }

    .upload-placeholder svg {
      width: 32px;
      height: 32px;
      margin: 0 auto 0.75rem;
      stroke: #999;
    }

    .upload-preview {
      width: 100%;
      aspect-ratio: 1;
      object-fit: cover;
      border-radius: 10px;
      display: none;
    }

    .photo-upload.has-photo .upload-placeholder {
      display: none;
    }

    .photo-upload.has-photo .upload-preview {
      display: block;
    }

    /* Crop Modal */
    .crop-modal {
      display: none;
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
      padding: 2rem;
    }

    .crop-modal.active {
      display: flex;
    }

    .crop-container {
      background: white;
      border-radius: 16px;
      padding: 1.5rem;
      max-width: 600px;
      width: 100%;
      max-height: 90vh;
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    .crop-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 1rem;
    }

    .crop-title {
      font-size: 1.1rem;
      font-weight: 700;
    }

    .crop-close {
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: #666;
    }

    .crop-image-wrapper {
      flex: 1;
      overflow: hidden;
      background: #f5f5f5;
      border-radius: 12px;
      margin-bottom: 1rem;
    }

    .crop-image {
      max-width: 100%;
      max-height: 400px;
      display: block;
    }

    .crop-actions {
      display: flex;
      gap: 0.75rem;
      justify-content: flex-end;
    }

    .crop-btn {
      padding: 0.75rem 1.5rem;
      border-radius: 10px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      border: none;
    }

    .crop-btn-primary {
      background: #1a1a1a;
      color: white;
    }

    .crop-btn-primary:hover {
      background: #333;
    }

    .crop-btn-secondary {
      background: #f0f0f0;
      color: #333;
    }

    .crop-btn-secondary:hover {
      background: #e0e0e0;
    }

    /* Verified Toggle */
    .toggle-group {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: #f8f9fa;
      border-radius: 10px;
    }

    .toggle-label {
      display: flex;
      align-items: center;
      gap: 0.75rem;
    }

    .toggle-icon {
      width: 36px;
      height: 36px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.9rem;
    }

    .toggle-text h4 {
      font-size: 0.95rem;
      font-weight: 600;
    }

    .toggle-text p {
      font-size: 0.8rem;
      color: #888;
    }

    .toggle-switch {
      position: relative;
      width: 52px;
      height: 28px;
    }

    .toggle-switch input {
      opacity: 0;
      width: 0;
      height: 0;
    }

    .toggle-slider {
      position: absolute;
      cursor: pointer;
      inset: 0;
      background: #ddd;
      border-radius: 28px;
      transition: 0.3s;
    }

    .toggle-slider:before {
      position: absolute;
      content: "";
      height: 22px;
      width: 22px;
      left: 3px;
      bottom: 3px;
      background: white;
      border-radius: 50%;
      transition: 0.3s;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .toggle-switch input:checked + .toggle-slider {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .toggle-switch input:checked + .toggle-slider:before {
      transform: translateX(24px);
    }

    /* Social Icons */
    .social-icons-group {
      display: flex;
      gap: 0.75rem;
      flex-wrap: wrap;
    }

    .social-btn {
      width: 44px;
      height: 44px;
      border: 2px solid #eee;
      border-radius: 10px;
      background: white;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.1rem;
      transition: all 0.2s;
    }

    .social-btn:hover {
      border-color: #ccc;
    }

    .social-btn.active {
      border-color: #1a1a1a;
      background: #1a1a1a;
      color: white;
    }

    /* Preview Panel */
    .preview-panel {
      position: sticky;
      top: 100px;
    }

    .preview-title {
      font-size: 0.85rem;
      font-weight: 600;
      color: #888;
      text-transform: uppercase;
      letter-spacing: 1px;
      margin-bottom: 1rem;
      text-align: center;
    }

    /* Profile Card */
    .card-wrapper {
      display: flex;
      justify-content: center;
      margin-bottom: 1.5rem;
    }

    .profile-card {
      width: 360px;
      background: white;
      border-radius: 24px;
      padding: 2.5rem 2rem;
      box-shadow: 0 4px 24px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
      text-align: center;
      position: relative;
    }

    .card-brand {
      position: absolute;
      top: 1.25rem;
      left: 1.5rem;
      font-size: 0.7rem;
      font-weight: 700;
      color: #ccc;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .card-photo-wrapper {
      width: 140px;
      height: 140px;
      margin: 0 auto 1.5rem;
      position: relative;
    }

    .card-photo {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      background: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #ccc;
      font-size: 2.5rem;
      overflow: hidden;
      position: relative;
    }

    .card-photo img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      position: absolute;
      top: 0;
      left: 0;
    }

    .verified-badge {
      position: absolute;
      bottom: 4px;
      right: 4px;
      width: 32px;
      height: 32px;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 50%;
      display: none;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 0.85rem;
      border: 3px solid white;
      box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
    }

    .verified-badge.show {
      display: flex;
    }

    .card-name {
      font-size: 1.6rem;
      font-weight: 700;
      margin-bottom: 0.25rem;
      letter-spacing: -0.5px;
    }

    .card-title {
      font-size: 1rem;
      color: #888;
      margin-bottom: 1rem;
    }

    .card-bio {
      font-size: 0.9rem;
      color: #666;
      line-height: 1.5;
      margin-bottom: 1.5rem;
      min-height: 2.7rem;
      padding: 0 0.5rem;
    }

    .card-social {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
    }

    .card-social-icon {
      width: 40px;
      height: 40px;
      background: #f5f5f5;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.9rem;
      color: #666;
    }

    /* Export Buttons */
    .export-buttons {
      display: flex;
      gap: 0.75rem;
    }

    .export-btn {
      flex: 1;
      padding: 1rem;
      border-radius: 12px;
      font-size: 0.95rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
    }

    .export-btn-primary {
      background: #1a1a1a;
      color: white;
      border: none;
    }

    .export-btn-primary:hover {
      background: #333;
    }

    .export-btn-secondary {
      background: white;
      color: #1a1a1a;
      border: 2px solid #eee;
    }

    .export-btn-secondary:hover {
      border-color: #ccc;
    }

    /* Footer */
    footer {
      background: white;
      border-top: 1px solid #eee;
      padding: 2rem;
      text-align: center;
    }

    footer p {
      font-size: 0.85rem;
      color: #888;
    }

    /* Responsive */
    @media (max-width: 900px) {
      .creator-layout {
        grid-template-columns: 1fr;
      }

      .preview-panel {
        position: static;
        order: -1;
      }
    }

    @media (max-width: 600px) {
      nav {
        padding: 1rem;
      }

      .hero {
        padding: 3rem 1.5rem;
      }

      .creator {
        padding: 1.5rem;
      }

      .editor-panel {
        padding: 1.5rem;
      }

      .profile-card {
        width: 320px;
        padding: 2rem 1.5rem;
      }

      .card-photo-wrapper {
        width: 120px;
        height: 120px;
      }

      .export-buttons {
        flex-direction: column;
      }

      .crop-container {
        padding: 1rem;
        max-height: 95vh;
      }
    }

    /* Hide landing when creator is active */
    .landing.hidden {
      display: none;
    }

    /* Animation */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .fade-in {
      animation: fadeIn 0.4s ease-out;
    }

    /* Cropper custom styles */
    .cropper-view-box,
    .cropper-face {
      border-radius: 50%;
    }

    .cropper-point {
      background-color: #1a1a1a;
    }

    .cropper-line {
      background-color: #1a1a1a;
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-content">
      <a href="#" class="logo" onclick="showLanding()">
        <span class="logo-icon">‚ú¶</span>
        CardFlow
      </a>
      <button class="nav-btn" onclick="showCreator()">Create Card</button>
    </div>
  </nav>

  <!-- Landing Page -->
  <main class="landing" id="landing">
    <section class="hero">
      <div class="hero-content fade-in">
        <div class="hero-badge">
          <span>‚ú®</span> No signup required
        </div>
        <h1>Create Premium Profile Cards Instantly</h1>
        <p>Design beautiful, verified profile cards with your photo. Download as high-quality PNG or JPG. Everything happens in your browser.</p>
        <div class="hero-cta">
          <button class="btn-primary" onclick="showCreator()">
            Create Your Card
            <span>‚Üí</span>
          </button>
          <button class="btn-secondary" onclick="document.querySelector('.features').scrollIntoView({behavior: 'smooth'})">
            Learn More
          </button>
        </div>
      </div>
    </section>

    <section class="features">
      <div class="features-grid">
        <div class="feature">
          <div class="feature-icon">üîí</div>
          <h3>100% Private</h3>
          <p>Your photo never leaves your browser. No uploads, no storage, complete privacy.</p>
        </div>
        <div class="feature">
          <div class="feature-icon">‚úì</div>
          <h3>Verified Badge</h3>
          <p>Add a premium verified badge to make your card look official and professional.</p>
        </div>
        <div class="feature">
          <div class="feature-icon">üì•</div>
          <h3>High-Quality Export</h3>
          <p>Download your card as PNG or JPG in high resolution, perfect for any use.</p>
        </div>
      </div>
    </section>

    <footer>
      <p>CardFlow ‚Äî Create Premium Profile Cards</p>
    </footer>
  </main>

  <!-- Creator Page -->
  <main class="creator" id="creator">
    <div class="creator-layout">
      <!-- Editor Panel -->
      <div class="editor-panel fade-in">
        <h2 class="editor-title">Customize Your Card</h2>

        <div class="form-group">
          <label class="form-label">Profile Photo <span style="color: #888; font-weight: 400;">(Crop to fit perfectly)</span></label>
          <div class="photo-upload" id="photoUpload" onclick="document.getElementById('photoInput').click()">
            <input type="file" accept="image/*" id="photoInput" onchange="handlePhotoUpload(event)">
            <div class="upload-placeholder">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21,15 16,10 5,21"/>
              </svg>
              <p>Click to upload photo</p>
              <p style="font-size: 0.8rem; color: #aaa; margin-top: 0.5rem;">You'll be able to crop it</p>
            </div>
            <img class="upload-preview" id="uploadPreview" alt="Preview">
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Full Name</label>
          <input type="text" class="form-input" id="nameInput" placeholder="John Doe" oninput="updateCard()">
        </div>

        <div class="form-group">
          <label class="form-label">Title / Role</label>
          <input type="text" class="form-input" id="titleInput" placeholder="Product Designer" oninput="updateCard()">
        </div>

        <div class="form-group">
          <label class="form-label">Short Bio (Optional)</label>
          <textarea class="form-input form-textarea" id="bioInput" placeholder="A few words about yourself..." oninput="updateCard()"></textarea>
        </div>

        <div class="form-group">
          <div class="toggle-group">
            <div class="toggle-label">
              <div class="toggle-icon">‚úì</div>
              <div class="toggle-text">
                <h4>Verified Badge</h4>
                <p>Show verification badge</p>
              </div>
            </div>
            <label class="toggle-switch">
              <input type="checkbox" id="verifiedToggle" onchange="updateCard()">
              <span class="toggle-slider"></span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label class="form-label">Social Icons (Optional)</label>
          <div class="social-icons-group">
            <button class="social-btn" data-social="twitter" onclick="toggleSocial(this)">ùïè</button>
            <button class="social-btn" data-social="linkedin" onclick="toggleSocial(this)">in</button>
            <button class="social-btn" data-social="github" onclick="toggleSocial(this)">‚åò</button>
            <button class="social-btn" data-social="instagram" onclick="toggleSocial(this)">‚óé</button>
            <button class="social-btn" data-social="website" onclick="toggleSocial(this)">‚óâ</button>
          </div>
        </div>
      </div>

      <!-- Preview Panel -->
      <div class="preview-panel">
        <p class="preview-title">Live Preview</p>

        <div class="card-wrapper">
          <div class="profile-card" id="profileCard">
            <div class="card-brand">CARDFLOW</div>

            <div class="card-photo-wrapper">
              <div class="card-photo" id="cardPhoto">
                <span id="photoPlaceholder">üë§</span>
                <img id="cardPhotoImg" style="display: none;" alt="Profile">
              </div>
              <div class="verified-badge" id="verifiedBadge">‚úì</div>
            </div>

            <h2 class="card-name" id="cardName">Your Name</h2>
            <p class="card-title" id="cardTitle">Your Title</p>
            <p class="card-bio" id="cardBio">Your bio will appear here...</p>

            <div class="card-social" id="cardSocial">
              <!-- Social icons will be added here -->
            </div>
          </div>
        </div>

        <div class="export-buttons">
          <button class="export-btn export-btn-primary" onclick="exportCard('png')">
            üì• Download PNG
          </button>
          <button class="export-btn export-btn-secondary" onclick="exportCard('jpg')">
            üì• JPG
          </button>
        </div>
      </div>
    </div>
  </main>

  <!-- Crop Modal -->
  <div class="crop-modal" id="cropModal">
    <div class="crop-container">
      <div class="crop-header">
        <h3 class="crop-title">Crop Your Photo</h3>
        <button class="crop-close" onclick="closeCropModal()">√ó</button>
      </div>
      <div class="crop-image-wrapper">
        <img class="crop-image" id="cropImage" alt="Crop">
      </div>
      <div class="crop-actions">
        <button class="crop-btn crop-btn-secondary" onclick="closeCropModal()">Cancel</button>
        <button class="crop-btn crop-btn-primary" onclick="applyCrop()">Apply Crop</button>
      </div>
    </div>
  </div>

  <script>
    // State
    let selectedSocials = [];
    let uploadedPhoto = null;
    let cropper = null;
    let originalFile = null;

    // Navigation
    function showLanding() {
      document.getElementById('landing').classList.remove('hidden');
      document.getElementById('creator').classList.remove('active');
    }

    function showCreator() {
      document.getElementById('landing').classList.add('hidden');
      document.getElementById('creator').classList.add('active');
    }

    // Photo Upload with Cropping
    function handlePhotoUpload(event) {
      const file = event.target.files[0];
      if (!file) return;

      originalFile = file;
      const reader = new FileReader();
      reader.onload = function(e) {
        // Show crop modal
        const cropImage = document.getElementById('cropImage');
        cropImage.src = e.target.result;
        document.getElementById('cropModal').classList.add('active');

        // Initialize cropper after image loads
        cropImage.onload = function() {
          if (cropper) {
            cropper.destroy();
          }
          cropper = new Cropper(cropImage, {
            aspectRatio: 1,
            viewMode: 1,
            dragMode: 'move',
            autoCropArea: 0.8,
            restore: false,
            guides: true,
            center: true,
            highlight: false,
            cropBoxMovable: true,
            cropBoxResizable: true,
            toggleDragModeOnDblclick: false,
            ready: function() {
              // Set initial crop area to center and square
              const canvasData = cropper.getCanvasData();
              const size = Math.min(canvasData.width, canvasData.height);
              const left = (canvasData.width - size) / 2;
              const top = (canvasData.height - size) / 2;
              cropper.setCropBoxData({
                left: left,
                top: top,
                width: size,
                height: size
              });
            }
          });
        };
      };
      reader.readAsDataURL(file);
    }

    function closeCropModal() {
      document.getElementById('cropModal').classList.remove('active');
      if (cropper) {
        cropper.destroy();
        cropper = null;
      }
      // Reset file input
      document.getElementById('photoInput').value = '';
    }

    function applyCrop() {
      if (!cropper) return;

      // Get cropped canvas with high quality
      const canvas = cropper.getCroppedCanvas({
        width: 400,
        height: 400,
        fillColor: '#fff',
        imageSmoothingEnabled: true,
        imageSmoothingQuality: 'high'
      });

      // Convert to data URL
      uploadedPhoto = canvas.toDataURL('image/jpeg', 0.95);

      // Update upload preview
      const preview = document.getElementById('uploadPreview');
      preview.src = uploadedPhoto;
      document.getElementById('photoUpload').classList.add('has-photo');

      // Update card photo
      const cardPhotoImg = document.getElementById('cardPhotoImg');
      cardPhotoImg.src = uploadedPhoto;
      cardPhotoImg.style.display = 'block';
      cardPhotoImg.onload = function() {
        // Ensure image is properly loaded before any export
        cardPhotoImg.style.opacity = '1';
      };
      document.getElementById('photoPlaceholder').style.display = 'none';

      // Close modal
      closeCropModal();
    }

    // Update Card Preview
    function updateCard() {
      const name = document.getElementById('nameInput').value || 'Your Name';
      const title = document.getElementById('titleInput').value || 'Your Title';
      const bio = document.getElementById('bioInput').value || 'Your bio will appear here...';
      const verified = document.getElementById('verifiedToggle').checked;

      document.getElementById('cardName').textContent = name;
      document.getElementById('cardTitle').textContent = title;
      document.getElementById('cardBio').textContent = bio;

      const badge = document.getElementById('verifiedBadge');
      if (verified) {
        badge.classList.add('show');
      } else {
        badge.classList.remove('show');
      }
    }

    // Toggle Social Icons
    function toggleSocial(btn) {
      const social = btn.dataset.social;

      if (btn.classList.contains('active')) {
        btn.classList.remove('active');
        selectedSocials = selectedSocials.filter(s => s !== social);
      } else {
        btn.classList.add('active');
        selectedSocials.push(social);
      }

      updateSocialIcons();
    }

    function updateSocialIcons() {
      const container = document.getElementById('cardSocial');
      container.innerHTML = '';

      const icons = {
        twitter: 'ùïè',
        linkedin: 'in',
        github: '‚åò',
        instagram: '‚óé',
        website: '‚óâ'
      };

      selectedSocials.forEach(social => {
        const icon = document.createElement('div');
        icon.className = 'card-social-icon';
        icon.textContent = icons[social];
        container.appendChild(icon);
      });
    }

    // Export Card with High Quality
    async function exportCard(format) {
      const card = document.getElementById('profileCard');
      const exportBtn = event.target;
      const originalText = exportBtn.innerHTML;

      // Show loading state
      exportBtn.innerHTML = '‚è≥ Processing...';
      exportBtn.disabled = true;

      try {
        // Wait for any images to load
        const img = card.querySelector('img');
        if (img && !img.complete) {
          await new Promise(resolve => {
            img.onload = resolve;
            img.onerror = resolve;
          });
        }

        // Use higher scale for better quality
        const canvas = await html2canvas(card, {
          scale: 4, // Higher scale for better quality
          backgroundColor: '#ffffff',
          useCORS: true,
          allowTaint: true,
          logging: false,
          imageTimeout: 0,
          onclone: function(clonedDoc) {
            // Ensure cloned element has proper dimensions
            const clonedCard = clonedDoc.getElementById('profileCard');
            clonedCard.style.transform = 'none';
            clonedCard.style.margin = '0';
          }
        });

        // Create high-quality download
        const link = document.createElement('a');
        const timestamp = new Date().getTime();
        link.download = `profile-card-${timestamp}.${format}`;

        if (format === 'png') {
          link.href = canvas.toDataURL('image/png');
        } else {
          link.href = canvas.toDataURL('image/jpeg', 0.98); // Higher quality JPEG
        }

        link.click();
      } catch (error) {
        console.error('Export failed:', error);
        alert('Export failed. Please try again.');
      } finally {
        // Restore button
        exportBtn.innerHTML = originalText;
        exportBtn.disabled = false;
      }
    }

    // Initialize
    updateCard();

    // Handle window resize for cropper
    window.addEventListener('resize', function() {
      if (cropper) {
        cropper.resize();
      }
    });
  </script>
</body>
</html>